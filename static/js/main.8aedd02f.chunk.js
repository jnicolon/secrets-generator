(this["webpackJsonpsecrets-generator"]=this["webpackJsonpsecrets-generator"]||[]).push([[0],{42:function(e,t,c){},43:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),s=c(18),a=c.n(s),o=(c(42),c(43),c(11)),i=c(4),u=c(3),l=c(9),j=c.p+"static/media/logo.62b43471.jpg",d=c(13),b=c.n(d),O="SET_CURRENT_USER",h="GET_SECRETS",f="SET_SIGN_IN_MODAL",p="SIGN_IN_USER";function x(e,t){return function(c){return c({type:O,payload:{isLoggedIn:t,userName:e}})}}function g(e){return function(t){return t({type:f,payload:e})}}var m=c(1);var v=function(){var e=Object(i.g)(),t=Object(r.useState)(!1),c=Object(l.a)(t,2),n=c[0],s=c[1],a=Object(u.c)((function(e){return e.users.isLoggedIn})),d=Object(u.c)((function(e){return e.users.currentUser})),b=Object(u.b)();return Object(m.jsxs)("div",{className:"navbar-container",children:[Object(m.jsx)(o.b,{to:"/",children:Object(m.jsx)("img",{className:"logo",src:j,alt:"logo"})}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:"/addsecret"===e.pathname?"nav-selected":"",children:Object(m.jsx)(o.b,{to:"/addsecret",children:"Add a Secret"})}),a?Object(m.jsxs)("li",{onClick:function(){s(!n)},style:{border:"solid 1px white",cursor:"pointer"},children:[n&&Object(m.jsx)("div",{className:"navbar-user-modal",children:Object(m.jsx)("h3",{onClick:function(){return b(x("",!1)),void s(!1)},className:"navbar-log-out-btn",children:"Sign Out"})}),"Hello ".concat(d)]}):null,a?Object(m.jsx)("li",{className:"/favorites"===e.pathname?"nav-selected":"",children:Object(m.jsx)(o.b,{to:"/usersecrets",children:"Your Secrets"})}):null]})]})};var N=function(e){var t=e.history,c=Object(r.useState)(""),n=Object(l.a)(c,2),s=n[0],a=n[1],i=Object(u.c)((function(e){return e.users.currentUser})),j=Object(u.c)((function(e){return e.users.isLoggedIn})),d=Object(u.b)();return Object(m.jsx)("div",{className:"addSecret-container",children:Object(m.jsxs)("form",{onSubmit:function(e){var c;e.preventDefault(),c=""===i?"Anonymous":i,b.a.post("https://secrets-generator.herokuapp.com/secrets/add",{secret:s,userName:c}).then((function(e){console.log("Secret added"),t.push("/")})).catch((function(e){return console.log(e)}))},className:"addSecret-form",children:[Object(m.jsx)("label",{children:" Enter your secret (max 50char)"}),Object(m.jsx)("textarea",{onChange:function(e){a(e.target.value)},maxLength:150,rows:8,cols:20,className:"addSecret-text-area",name:s}),Object(m.jsx)("button",{children:"Submit"}),Object(m.jsx)("br",{}),j?null:Object(m.jsxs)("p",{className:"addSecret-form-info",children:["If you want to keep track of your secrets",Object(m.jsx)("br",{}),Object(m.jsx)("span",{onClick:function(){d(g(!0))},children:" SIGN IN "}),"or",Object(m.jsx)(o.b,{to:"/createuser",children:Object(m.jsx)("span",{children:" CREATE A USER "})})]})]})})};var y=function(e){var t=e.text,c=e.direction,r={backgroundImage:e.img};return Object(m.jsx)("div",{style:r,className:"postcard-container ".concat(c),children:Object(m.jsx)("h1",{className:"postcard-text",children:t})})},S=c(37);var I=function(e){var t=e.secrets,c=e.user,r=Object(u.b)(),n=function(e){r(function(e){return function(t,c){var r=c().secrets.secrets.filter((function(t){return t._id!==e}));return b.a.delete("https://secrets-generator.herokuapp.com/secrets/".concat(e)).then((function(e){console.log(e.data),t({type:h,payload:r})})).catch((function(e){return console.log(e)}))}}(e))};return Object(m.jsx)("ul",{className:"postcard-list-container",children:t.map((function(e){var r=Math.floor(2*Math.random()),s=t.indexOf(e),a="url(https://picsum.photos/".concat(function(e){return 0===e?"526/359":"359/526"}(r),"?random=").concat(s+1,")");return Object(m.jsxs)("li",{children:[Object(m.jsx)(y,{img:a,direction:0===r?"postcard-horizontal":"postcard-vertical",text:e.secret}),c&&Object(m.jsx)("div",{onClick:function(){n(e._id)},className:"postcard-trashcan",children:"Delete secret"})]},s)}))})};var E=function(){var e=Object(u.c)((function(e){return e.secrets.secrets})),t=Object(u.c)((function(e){return e.users.currentUser})),c=Object(r.useState)([]),n=Object(l.a)(c,2),s=n[0],a=n[1],o=Object(u.c)((function(e){return e.users.isLoggedIn}));return Object(r.useEffect)((function(){var c=e.filter((function(e){return e.userName===t}));a(c)}),[e,t]),Object(m.jsxs)(m.Fragment,{children:[!o&&Object(m.jsx)(i.a,{to:"/"}),Object(m.jsx)(I,{user:!0,secrets:s}),";"]})};var C=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.secrets.secrets}));return Object(r.useEffect)((function(){e((function(e){return b.a.get("https://secrets-generator.herokuapp.com/secrets/").then((function(t){var c=Object(S.a)(t.data).reverse();e({type:h,payload:c})})).catch((function(e){console.log(e)}))}))}),[e]),Object(m.jsx)(I,{secrets:t})};var U=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),c=t[0],n=t[1],s=Object(r.useState)(""),a=Object(l.a)(s,2),o=a[0],i=a[1],j=Object(r.useState)(!1),d=Object(l.a)(j,2),O=d[0],h=d[1],f=Object(u.b)();return O?Object(m.jsx)("div",{className:"addSecret-container",children:Object(m.jsxs)("div",{className:"add-secret-form",children:[Object(m.jsx)("br",{})," ",Object(m.jsx)("br",{}),Object(m.jsx)("h4",{children:"User succesfully created."})]})}):Object(m.jsx)("div",{className:"addSecret-container",children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b.a.post("https://secrets-generator.herokuapp.com/add",{userName:c}).then((function(){f(x(c,!0)),h(!0)})).catch((function(e){"Error: 11000"===e.response.data?i("User already exists"):i("User must be at least 3 characters long"),console.log(e.response)}))},className:"addSecret-form",children:[Object(m.jsx)("label",{children:" Enter your username."}),Object(m.jsx)("input",{className:"createUser-input",type:"text",onChange:function(e){n(e.target.value),i("")}}),""!==o&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("p",{className:"createUser-error",children:o})}),Object(m.jsx)("button",{children:"Create"}),Object(m.jsx)("br",{}),Object(m.jsxs)("p",{children:["If you already have a user",Object(m.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return f(g(!0))},children:[" ","SIGN IN"]})]})]})})};var k=function(){return Object(m.jsxs)("div",{className:"footer-container",children:[Object(m.jsx)("h6",{className:"footer-txt",children:"Created by Juan Nicolon"}),Object(m.jsx)("a",{href:"https://postsecret.com/",children:Object(m.jsx)("h6",{className:"footer-txt",children:"Inspired by PostSecret blog"})})]})};var L=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),c=t[0],n=t[1],s=Object(u.c)((function(e){return e.users.logInError})),a=Object(u.c)((function(e){return e.users.isLoggedIn})),j=Object(u.b)(),d=function(e){j(g(e))};return Object(r.useEffect)((function(){a&&j(g(!1))}),[j,a]),Object(m.jsxs)(m.Fragment,{children:[a&&Object(m.jsx)(i.a,{to:"/"}),Object(m.jsx)("div",{className:"modal-bg"}),Object(m.jsxs)("div",{className:"login-container",children:[Object(m.jsx)("div",{onClick:function(){return d(!1)},className:"close-modal",children:"X"}),Object(m.jsx)("h2",{className:"login-title",children:"Sign In"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(function(e){return function(t){return b.a.get("https://secrets-generator.herokuapp.com/users").then((function(c){0===c.data.filter((function(t){return t.userName===e})).length?t({type:p,payload:{userName:"",isLoggedIn:!1,logInError:"User doesn't exist."}}):t({type:p,payload:{userName:e,isLoggedIn:!0},logInError:""})})).catch((function(e){return console.log(e)}))}}(c))},className:"login-contaienr",children:[Object(m.jsx)("label",{children:"If you already have a user enter it here:"}),Object(m.jsx)("input",{onChange:function(e){n(e.target.value)},type:"text"}),""!==s&&Object(m.jsx)("p",{className:"createUser-error",children:s}),Object(m.jsx)("button",{children:"Sign in"})]}),Object(m.jsxs)("p",{children:["Otherwise",Object(m.jsxs)(o.b,{onClick:function(){return d(!1)},className:"login-user-btn",to:"/createuser",children:[" ","create a user"]}),"."]})]})]})};var _=function(){var e=Object(u.c)((function(e){return e.users.signInModal}));return Object(m.jsx)("div",{className:"app",children:Object(m.jsxs)(o.a,{basename:"/",children:[Object(m.jsx)(v,{}),e&&Object(m.jsx)(L,{}),Object(m.jsxs)(i.d,{children:[Object(m.jsx)(i.b,{exact:!0,path:"/",component:C}),Object(m.jsx)(i.b,{path:"/addsecret",component:N}),Object(m.jsx)(i.b,{path:"/usersecrets",component:E}),Object(m.jsx)(i.b,{path:"/createuser",component:U})]}),Object(m.jsx)(k,{})]})})},w=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,69)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),r(e),n(e),s(e),a(e)}))},T=c(14),D=c(36),M=c(12),R={currentUser:"",isLoggedIn:!1,signInModal:!1,logInError:""};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(M.a)(Object(M.a)({},e),{},{currentUser:t.payload.userName,isLoggedIn:t.payload.isLoggedIn});case f:return Object(M.a)(Object(M.a)({},e),{},{signInModal:t.payload});case p:return Object(M.a)(Object(M.a)({},e),{},{currentUser:t.payload.userName,isLoggedIn:t.payload.isLoggedIn,logInError:t.payload.logInError});default:return e}},A={secrets:[]};var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(M.a)(Object(M.a)({},e),{},{secrets:t.payload});default:return e}},P=Object(T.c)({users:F,secrets:G}),J="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,X=Object(T.e)(P,J(Object(T.a)(D.a)));a.a.render(Object(m.jsx)(u.a,{store:X,children:Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(_,{})})}),document.getElementById("root")),w()}},[[68,1,2]]]);
//# sourceMappingURL=main.8aedd02f.chunk.js.map